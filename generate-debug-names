#!/bin/sh

cat <<EOF
// AUTOGENERATED BY $(echo $0), DO NOT MODIFY

#ifndef __6502_DEBUG_NAMES__
#define __6502_DEBUG_NAMES__

#include <stdint.h>

char *inst_names[0x100];
char names_initialized = 0;

void init_names() {
    if (names_initialized) {
        return;
    }
    names_initialized = 1;

    for (int i = 0; i < 0xFF; i++) {
        inst_names[i] = "unknown";
    }
EOF

awk '/^#define (.+)[[:blank:]]+(0x[[:xdigit:]]{2})/ { printf "    inst_names[%s] = \"%s\";\n", $3, $2 }'

cat <<EOF
}

#endif
EOF

